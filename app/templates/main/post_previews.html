{% from 'macros.html' import render_pagination_buttons %}

{% for post in posts.items %}
  <div class="post">
    <h1 class="post-title"><a href="{{ url_for('main.show_post', id=post.id, slug=post.slug) }}">{{ post.title }}</a></h1>
    <p class="post-byline">
      Posted by {{ post.author.name }} on {{ moment(post.timestamp).format('LLL') }}
      {% if post.tags.all() %}
        under
        {% for tag in post.tags.all() %}
          <span class="label label-primary"><a href="{{ url_for('main.show_tag', id=tag.id, slug=tag.slug) }}">{{ tag.name }}</a></span>
        {% endfor %}
      {% endif %}
    </p>
    <p>{{ post.short_text|markdown }}</p>
  </div>
{% endfor %}

{% if request.endpoint == 'main.show_search_results' %}
  {{ render_pagination_buttons(posts, query=query) }}
{% else %}
  {{ render_pagination_buttons(posts) }}
{% endif %}
